import{X as Y,a9 as Z,ac as ee,a0 as ae,n as e,j as n,as as le,o as te,c as oe,w as l,ao as S,S as h,U as s,p as de,C as i,x as D,l as P,z as E,I as w,R as p,M as B,at as c,Q as T,ar as ue,r as se}from"./index-0ff0e839.js";import{a as b}from"./axios-c3190ae9.js";import{V as ne,a as I}from"./VDataTable-4e6edfbe.js";import{V as N}from"./VSpacer-8bb07fbd.js";import{V as L}from"./VDialog-b6cffd31.js";import"./VList-3083093e.js";import"./VDivider-0af59cf2.js";import"./dialog-transition-6eb1d82e.js";import"./VMenu-08498f95.js";import"./VOverlay-2cd37316.js";const j=Y()({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...Z(),...ee()},setup(V,g){let{slots:r}=g;return ae(()=>e(V.tag,{class:["v-container",{"v-container--fluid":V.fluid},V.class],style:V.style},r)),{}}}),ie={class:"d-flex gap-1"},re=P("span",{class:"headline"}," Edit Product ",-1),me=P("span",{class:"headline"}," Create Product ",-1),ke={__name:"second-page",setup(V){const g=n(""),r=n([]),y=n(!1),k=n(!1),x=n(!1),U=n({sub_categoria:"",codigo:"",costo:"",nombre:"",marca:"",cantidad:"",descripcion:""}),A=n([]),O=n([]),o=n(U.value),v=n(-1),_=n([]),C=n([]),R=[{title:"ID",sortable:!1,key:"id"},{title:"Codigo",sortable:!1,key:"codigo"},{title:"Costo",sortable:!1,key:"costo"},{title:"Nombre",sortable:!1,key:"nombre"},{title:"Marca",sortable:!1,key:"marca"},{title:"Cantidad",sortable:!1,key:"cantidad"},{title:"Sub_categoria",sortable:!1,key:"sub_categoria"},{title:"Descripcion",sortable:!1,key:"descripcion"},{title:"action",sortable:!1,key:"action"}];le(async()=>{try{const t=await b.get("https://throbbing-dream-9794.fly.dev/api/v1.2/product/");r.value=t.data,await J(),await K(),W()}catch(t){console.log(t)}});const F=t=>{v.value=r.value.indexOf(t),o.value={...t},y.value=!0},M=()=>{y.value=!1,v.value=-1,o.value={...U.value}},z=()=>{let t=v.value;v.value>-1&&b.put(`https://throbbing-dream-9794.fly.dev/api/v1.2/product/${o.value.id}/`,o.value).then(a=>{console.log(t),Object.assign(r.value[t],a.data)}).catch(a=>{console.log(a)}),M()},Q=t=>{v.value=r.value.findIndex(a=>a.id===t.id),o.value={...t},k.value=!0},$=()=>{k.value=!1,v.value=-1,o.value={...U.value}},X=()=>{b.delete(`https://throbbing-dream-9794.fly.dev/api/v1.2/product/${o.value.id}/`).then(t=>{r.value.splice(v.value,1),$()}).catch(t=>{console.log(t)})},q=()=>{x.value=!0},G=()=>{x.value=!1,v.value=-1,o.value={...U.value}},H=()=>{b.post("https://throbbing-dream-9794.fly.dev/api/v1.2/product/",o.value).then(t=>{const a=_.value.find(m=>m.id===t.data.marca),f=C.value.find(m=>m.id===t.data.sub_categoria);t.data.marca=a?a.nombre:"",t.data.sub_categoria=f?f.nombre:"",o.value=t.data,r.value.push(t.data),G()}).catch(t=>{console.log(t)})},J=async()=>{try{const t=await b.get("https://throbbing-dream-9794.fly.dev/api/v1.2/marca/");A.value=t.data,_.value=t.data.map(a=>({id:a.id,nombre:a.nombre}))}catch(t){console.log(t)}},K=async()=>{try{const t=await b.get("https://throbbing-dream-9794.fly.dev/api/v1.2/subcategoria/");O.value=t.data,C.value=t.data.map(a=>({id:a.id,nombre:a.nombre}))}catch(t){console.log(t)}},W=()=>{r.value.forEach(t=>{const a=_.value.find(m=>m.id===t.marca);t.marca=a?a.nombre:"";const f=C.value.find(m=>m.id===t.sub_categoria);t.sub_categoria=f?f.nombre:""})};return(t,a)=>{const f=ue,m=se("IconBtn");return te(),oe("div",null,[e(w,{class:"my-6"},{default:l(()=>[e(S,null,{default:l(()=>[e(h,null,{default:l(()=>[e(s,{cols:"12","offset-md":"8",md:"4"},{default:l(()=>[e(f,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=u=>g.value=u),desity:"compact",placeholder:"Search","append-inner-icon":"tabler-searcj=h","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(de(ne),{striped:"",hover:"",class:"text-no-wrap",headers:R,items:r.value,search:g.value,responsive:"sm","item-per-page":5},{"item.marcasList":l(({item:u})=>[i(D(u.marcasList),1)]),"item.action":l(({item:u})=>[P("div",ie,[e(m,{onClick:d=>F(u.raw)},{default:l(()=>[e(E,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(m,{onClick:d=>Q(u.raw)},{default:l(()=>[e(E,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"])])]),_:1},8,["items","search"])]),_:1}),e(p,{color:"success",onClick:q},{default:l(()=>[i(" Create Item ")]),_:1}),e(L,{modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=u=>y.value=u),"max-width":"600px"},{default:l(()=>[e(w,null,{default:l(()=>[e(B,null,{default:l(()=>[re]),_:1}),e(S,null,{default:l(()=>{var u;return[i(D((u=o.value)==null?void 0:u.nombre)+" ",1),e(j,null,{default:l(()=>[e(h,null,{default:l(()=>[e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.nombre,"onUpdate:modelValue":a[1]||(a[1]=d=>o.value.nombre=d),label:"Nombre"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.costo,"onUpdate:modelValue":a[2]||(a[2]=d=>o.value.costo=d),label:"Costo"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(I,{modelValue:o.value.marca,"onUpdate:modelValue":a[3]||(a[3]=d=>o.value.marca=d),items:_.value,"item-title":"nombre","item-value":"id",label:"Marca"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(I,{modelValue:o.value.sub_categoria,"onUpdate:modelValue":a[4]||(a[4]=d=>o.value.sub_categoria=d),items:C.value,"item-title":"nombre","item-value":"id",label:"Subcategoria"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",sm:"6",md:"6"},{default:l(()=>[e(c,{modelValue:o.value.cantidad,"onUpdate:modelValue":a[5]||(a[5]=d=>o.value.cantidad=d),label:"Cantidad"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"6"},{default:l(()=>[e(c,{modelValue:o.value.descripcion,"onUpdate:modelValue":a[6]||(a[6]=d=>o.value.descripcion=d),label:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]}),_:1}),e(T,null,{default:l(()=>[e(N),e(p,{color:"error",variant:"outlined",onClick:M},{default:l(()=>[i(" Cancel ")]),_:1}),e(p,{color:"success",variant:"elevated",onClick:z},{default:l(()=>[i(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:k.value,"onUpdate:modelValue":a[8]||(a[8]=u=>k.value=u),"max-width":"500px"},{default:l(()=>[e(w,null,{default:l(()=>[e(B,null,{default:l(()=>[i(" Are you sure you want to delete this item? ")]),_:1}),e(T,null,{default:l(()=>[e(N),e(p,{color:"error",variant:"elevated",onClick:$},{default:l(()=>[i(" Cancel ")]),_:1}),e(p,{color:"error",variant:"elevated",onClick:X},{default:l(()=>[i(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(L,{modelValue:x.value,"onUpdate:modelValue":a[16]||(a[16]=u=>x.value=u),"max-width":"600px"},{default:l(()=>[e(w,null,{default:l(()=>[e(B,null,{default:l(()=>[me]),_:1}),e(S,null,{default:l(()=>{var u;return[i(D((u=o.value)==null?void 0:u.nombre)+" ",1),e(j,null,{default:l(()=>[e(h,null,{default:l(()=>[e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.nombre,"onUpdate:modelValue":a[9]||(a[9]=d=>o.value.nombre=d),modelModifiers:{trim:!0},label:"Nombre"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(c,{modelValue:o.value.costo,"onUpdate:modelValue":a[10]||(a[10]=d=>o.value.costo=d),modelModifiers:{trim:!0},label:"Costo"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"6"},{default:l(()=>[e(c,{modelValue:o.value.cantidad,"onUpdate:modelValue":a[11]||(a[11]=d=>o.value.cantidad=d),modelModifiers:{trim:!0},label:"Cantidad"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(I,{modelValue:o.value.marca,"onUpdate:modelValue":a[12]||(a[12]=d=>o.value.marca=d),items:_.value,"item-title":"nombre","item-value":"id",label:"Marca"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",sm:"6",md:"4"},{default:l(()=>[e(I,{modelValue:o.value.sub_categoria,"onUpdate:modelValue":a[13]||(a[13]=d=>o.value.sub_categoria=d),items:C.value,"item-title":"nombre","item-value":"id",label:"Subcategoria"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"12",sm:"6",md:"6"},{default:l(()=>[e(c,{modelValue:o.value.codigo,"onUpdate:modelValue":a[14]||(a[14]=d=>o.value.codigo=d),modelModifiers:{trim:!0},label:"Codigo"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",sm:"6",md:"6"},{default:l(()=>[e(c,{modelValue:o.value.descripcion,"onUpdate:modelValue":a[15]||(a[15]=d=>o.value.descripcion=d),modelModifiers:{trim:!0},label:"Descripcion"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]}),_:1}),e(T,null,{default:l(()=>[e(N),e(p,{color:"error",variant:"outlined",onClick:M},{default:l(()=>[i(" Cancel ")]),_:1}),e(p,{color:"success",variant:"elevated",onClick:H},{default:l(()=>[i(" Save ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{ke as default};
